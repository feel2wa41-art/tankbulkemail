# 고객사 전달용 운영 가이드 (End User Manual v1)
본 문서는 고객사(최종 사용자)가 Tank 자동 이메일 시스템을 **실제 업무에서 쉽게 사용할 수 있도록** 제작된 운영 매뉴얼입니다.

개발자용 문서가 아닌, **업무 담당자·팀장·운영자** 대상의 쉬운 설명 방식으로 작성되어 있습니다.

---
# 📌 1. 시스템 개요
Tank 자동 이메일 시스템은 고객사 내부 Oracle DB에서 고객 정보를 가져와, 템플릿에 맞춰 **자동으로 이메일을 발송**하는 시스템입니다.

주요 기능은 다음과 같습니다:
```
① 고객 대상 자동 이메일 발송
② 첨부파일 자동 매칭 후 발송
③ Oracle DB와 직접 연동
④ 스케줄 자동 실행(매일/매주/매월)
⑤ 발송 결과 리포트 확인
⑥ 대시보드에서 전체 상태 확인
```

---
# 📌 2. 로그인
1. 시스템 접속 후 사용자 ID/비밀번호 입력
2. 권한에 따라 화면이 달라집니다:
   - **관리자(Admin)**: 모든 기능 사용 가능
   - **운영자(Operator)**: 자동화 생성/수정 가능
   - **조회자(Viewer)**: 조회만 가능

---
# 📌 3. 메뉴 구성
좌측 메뉴는 다음과 같은 구조입니다:
```
Dashboard
Organization (조직 관리)
Automation (자동 이메일)
DB Profile (DB 연결 설정)
Template (템플릿 설정)
Schedule (스케줄 설정)
Report (리포트)
Setting (사용자/기본설정)
```

---
# 📌 4. Dashboard 사용법
대시보드는 시스템의 전체 상황을 한눈에 볼 수 있습니다.

표시 항목:
- 오늘 발송된 이메일 수
- 실패 건수
- 최근 실행된 자동화 목록
- 도메인별 성공률(gmail/yahoo/회사도메인)
- 시간대별 발송 그래프

문제가 있는 경우 **실패 그래프가 상승**하는 것으로 빠르게 확인 가능합니다.

---
# 📌 5. 조직 관리 (Organization)
조직은 자동 이메일 발송 그룹을 의미합니다.

예:
```
MTI 1부서 자동 이메일
MTI 2부서 자동 이메일
MT1 본부 고객 자동 이메일
```

### ✔ 조직 추가
1. **+추가하기** 클릭
2. 조직 이름 입력
3. 저장

### ✔ 조직 선택 시
해당 조직에 설정된 Automation 목록 표시됩니다.

---
# 📌 6. 자동 이메일(Automation) 관리
Automation은 “하나의 이메일 발송 흐름”을 의미합니다.

예: **월간 거래명세서 발송**, **고객 잔액 알림** 등

### ✔ Automation 생성
1. 자동 이메일 메뉴 → “새 자동화 만들기” 클릭
2. 이름 입력
3. 다음 단계(DB 설정)로 이동

---
# 📌 7. DB Profile (Oracle DB 연결 설정)
Automation이 고객 정보를 가져오기 위해 필요한 설정입니다.

### ✔ 설정 방법
1. Oracle DB IP주소 입력
2. Port (보통 1521)
3. SID 또는 Service Name 입력
4. User/Password 입력
5. **Connect Test** 버튼 클릭 → 성공 시 저장

이 단계가 성공해야 다음 단계(쿼리 입력)로 진행할 수 있습니다.

---
# 📌 8. DB Query 설정 (DBIO Register)
자동 발송을 위해 필요한 3가지 쿼리를 입력합니다.

## 🔸 1) Target Query
고객 목록을 불러오는 쿼리입니다.

필수 컬럼:
```
EMAIL, PRIMARY_KEY, ATTACH_FILE_NAME
```

## 🔸 2) Mapping Query
이메일 내용에 들어갈 상세 정보를 가져옵니다.
예:
```
고객 이름, 잔액, 거래일자
```

## 🔸 3) Update Query
발송 완료 후 DB에 기록할 내용이 있다면 입력합니다.

---
# 📌 9. Email 설정 (발신 정보)
자동 이메일의 발신 정보를 설정합니다.

- 발신자 이메일(Sender)
- 발신자 이름(Sender Name)
- 제목(변수 사용 가능)
- 기본 인코딩(UTF-8)

예:
```
$(NAME) 고객님 거래정보 안내드립니다
```

---
# 📌 10. 템플릿 설정 (Template Settings)
이메일 본문(HTML)을 작성하는 화면입니다.

### ✔ 기능
- HTML 직접 작성
- Preview 기능으로 테스트 확인
- 매핑된 변수 자동 적용

예: HTML 내 변수 사용:
```
<p>안녕하세요 $(NAME) 고객님</p>
```

---
# 📌 11. 첨부파일 매칭
DB에서 가져온 파일명과 실제 NAS/서버에 존재하는 파일을 자동 매칭합니다.

### ✔ 파일 상태 표시
- FOUND: 정상
- NOT_FOUND: 파일 없음
- DUPLICATED: 동일 이름 파일 2개 이상
- INVALID: 파일 손상

### ✔ 옵션
- 파일 없으면 해당 고객만 건너뛰기
- 파일 없으면 전체 작업 중단하기

---
# 📌 12. 스케줄 설정
자동화를 언제 실행할지 설정합니다.

### ✔ 실행 주기
- 매일(Daily)
- 매주(Weekly)
- 매월(Monthly)
- 특정 날짜/시간(Custom)

### ✔ 예시
```
매월 5일 오전 08:30 실행
```

---
# 📌 13. 테스트 발송 (중요)
본 발송 전에 반드시 “테스트 발송”을 통해 템플릿과 첨부파일을 미리 검증하세요.

절차:
1. 테스트 이메일 입력
2. Preview 확인
3. 테스트 메일 발송

---
# 📌 14. 리포트 (Report)
발송 결과를 한눈에 확인할 수 있습니다.

### ✔ Daily Summary
- 총 발송 수
- 성공/실패 분포
- 도메인별 성공률

### ✔ Automation 실행 로그
Automation별로 실행 내역 확인 가능

### ✔ 고객별 상세 로그
- 성공/실패 원인
- 파일 상태
- SES 메시지 ID

---
# 📌 15. 자주 묻는 질문 (FAQ)
### ✔ Q1. 파일이 없다고 뜹니다.
- NAS 경로 확인
- 파일명 정확한지 확인

### ✔ Q2. 이메일이 안 갑니다.
- Oracle 연결 문제 여부 확인
- SES 설정값 확인
- 첨부파일 크기 확인

### ✔ Q3. 제목이 깨져 보입니다.
- UTF-8 인코딩인지 확인

---
# 📌 16. 고객사 운영 체크리스트
```
[매일]
- 자동화가 정상 실행되었는지 확인
- 실패 이메일 증가 여부 확인

[매주]
- DB 연결 정상 여부 확인
- 첨부파일 누락 증가 여부 확인

[매월]
- 스케줄 만료일 확인
- 템플릿 최신화 여부 확인
```

---
# ✔ 17. 다음 문서
- SLA 운영 정책(선택)
- Backup & Recovery 가이드(선택)
- Batch 파일 생성 가이드(옵션, 배치파일 자동 생성 시스